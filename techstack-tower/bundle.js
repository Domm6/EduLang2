!function t(e,n,i){function r(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};e[a][0].call(s.exports,function(t){var n=e[a][1][t];return r(n?n:t)},s,s.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){e.exports=function(){var t={};return t.bindEvent=function(t,e){var n={};n.code=t,n.isDown=!1,n.isUp=!0,n.press=void 0,n.release=void 0,n.downHandler=function(t){t.keyCode===n.code&&(n.isUp&&n.press&&n.press(),n.isDown=!0,n.isUp=!1),t.preventDefault()},n.upHandler=function(t){t.keyCode===n.code&&(n.isDown&&n.release&&n.release(),n.isDown=!1,n.isUp=!0),t.preventDefault()},window.addEventListener("keydown",n.downHandler.bind(n),!1),window.addEventListener("keyup",n.upHandler.bind(n),!1),n.press=e},t}},{}],2:[function(t,e,n){function i(){function e(t){return ht[t]}function n(){var t=function(t){var e=new PIXI.Sprite(gt[t].texture);e.anchor.x=0,e.anchor.y=.6,e.width=m,e.height=3*P,e.position.x=0,e.position.y=0,K.addChild(e),ht.push(e);var n;window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(window.location.reload.bind(window.location),500)},!0)};t("background"),t("background2"),t("background3"),K.addChild(vt),K.interactive=!0,K.buttonMode=!0,K.hitArea=new PIXI.Rectangle(0,0,m,P),K.mousedown=function(){r()},K.touchstart=function(){r()};for(var e=0;e<3;e++)for(var n=0;n<=C.getLevelMax(e);n++){var i=new PIXI.Sprite(C.getLevelSprite(gt,n,e));C.initBlock(i),dt[e].push(i),K.addChild(i)}j=u(""+ft,m/2,P/2,46,K),V=u("",m/2,P/3,46,K),q=u("",m/1.05,P/12,24,K),q.style={font:"24px courier",fill:"white",stroke:"black",strokeThickness:5,align:"center"},pt.anchor.set(.5,.5),K.addChild(pt)}function i(){var t=gt.background_intro.texture;U=new PIXI.extras.TilingSprite(t,N.width,N.height),Y.addChild(U);var e=new PIXI.Graphics;e.beginFill(St),e.lineStyle(5,bt),e.drawRect(m/2-270,P/4-50,540,100),Y.addChild(e);var n=u("by lhartikk",m/1.05,P/1.05,12,Y);n.interactive=!0,n.buttonMode=!0;var i=function(){window.open("https://github.com/lhartikk","_blank")};n.click=function(){i()},n.tap=function(){i()},u("choose level",m/2,P/4,72,Y),B=u("",m/2,P/2.6,32,Y);var r=m/2-90-280,o=l("modern",r,P/2,Y);u("modern",r+o.width/2-20,P/2+o.height+20,32,Y);var a=m/2-90;R=l("lock",a,P/2,Y),G=l("legacy",a,P/2,Y),u("legacy",a+G.width/2-15,P/2+G.height+20,32,Y);var c=m/2+90+100;X=l("lock",c,P/2,Y),_=l("enterprise",c,P/2,Y),u("enterprise",c+_.width/2-10,P/2+_.height+20,32,Y)}function r(){if(!(z<Z))return xt==Lt.PLAYING?void(v().state!==wt.FALLING&&o()):xt==Lt.GAMEOVER_SCROLLED?void d():void 0}function o(){v().state=wt.FALLING,v().vx=(E(nt)-E(nt-1))/2}function a(t,e,n,i,r){t.style={font:r+"px courier",fill:"white",stroke:"black",strokeThickness:8,align:"center"},t.anchor.set(.5,.5),t.position.set(n,i),t.text=e}function u(t,e,n,i,r){var o=new PIXI.Text;return a(o,t,e,n,i),r.addChild(o),o}function c(t,e,n,i){a(pt,t,e,n,i),pt.alpha=0,lt=0}function l(t,e,n,i){var r=gt[t].texture,o=new PIXI.Sprite(r);o.x=e;var a=new PIXI.Graphics;a.interactive=!0,a.buttonMode=!0,a.defaultCursor="pointer",a.beginFill(St),a.lineStyle(5,bt),a.drawRect(e-Et/2,n-Et/2,o.width+Et,o.height+Et),a.hitArea=new PIXI.Rectangle(e-Et/2,n-Et/2,o.width+Et,o.height+Et),a.mouseover=function(t){a.beginFill("0x8e812f"),a.drawRect(e-Et/2,n-Et/2,o.width+Et,o.height+Et)},a.mouseout=function(t){a.beginFill(St),a.drawRect(e-Et/2,n-Et/2,o.width+Et,o.height+Et)};var u=function(){xt===Lt.INTRO&&("modern"===t?(W=0,f()):"legacy"===t?(W=1,f()):"enterprise"===t?(W=2,f()):"lock"===t&&(B.text="Complete previous level first"))};return a.mousedown=function(t){u()},a.touchstart=function(){u()},i.addChild(a),o.y=n,a.addChild(o),a}function s(t,e){return t.indexOf(e)>-1}function d(){z=0;var t=!0,e=!0,n=(localStorage.getItem(It)||"").split(",");n&&(s(n,"modern")&&(t=!1),s(n,"legacy")&&(e=!1)),R.visible=t,G.visible=!t,X.visible=e,_.visible=!e,Y.visible=!0,K.visible=!1,xt=Lt.INTRO}function f(){B.text="",F=0,J=!1,z=0,ft=0,C.initBlocks(h(0),P),C.initBlocks(h(1),P,.8),C.initBlocks(h(2),P,.5),j.text="",V.text="",q.text=F.toString(),v().x=m/2-v().width/2,v().y=P-v().height,v().state=wt.LANDED,A(),xt=Lt.PLAYING,e(0).visible=!1,e(1).visible=!1,e(2).visible=!1,e(W).visible=!0}function h(t){return dt[t]}function v(){return dt[W][ft]}function p(){return dt[W][0]}function g(){for(var t=0;;){if(!C.contains([wt.MISSED,wt.TOTALLYMISSED],dt[W][ft-1-t].state))return dt[W][ft-1-t];t++}}function x(){return g().y<P*(2/3)}function L(){return 0!=ft&&v().y>=g().y-v().height}function w(t){lt++;var e=10,n=20,i=10;lt<e&&(t.alpha=lt/e),xt==Lt.PLAYING&&(lt>e+n&&lt<i+e+n&&(t.alpha=1-(lt-e-n)/i),lt>i+e+n&&(t.alpha=0))}function E(t){return C.getBlockSwingX(W)*Math.cos(t/et)*40*dt[0][1].width/120}function S(t){return ot*Math.cos(t/et+Math.PI/2)}function b(t,e){return console.log(e*(at+1)),Math.cos(t/40+Math.PI/2)*(1/rt)*Math.min(140,e*(at+1))}function I(t){st=0,c("Game Over",m/2,P/6,64),vt.clear(),xt=Lt.GAMEOVER_NONSCROLLED,v().state=wt.MISSED;var e=function(){var t=function(){return Math.abs(v().x-g().x)/g().width},e=function(){return 1-(v().x-g().x)/g().width},n=function(){return v().x>g().x},i=function(){return n()?e():t()},r=function(){return n()?ut:-ut},o=i();v().anchor.y=1,v().anchor.x=o,v().y+=v().height,v().x+=o*v().width,v().vrotation=r()},n=function(){v().state=wt.TOTALLYMISSED};t>v().width?n():e()}function k(){pt.position.y+=$,e(W).position.y+=$-2,C.toLandedBlocks(h(W),function(t){t.y+=$})}function y(){pt.position.y-=$,e(W).position.y-=$-2,C.toLandedBlocks(h(W),function(t){t.y-=$})}function M(){var t=v().width-g().width,e=Math.min(Math.abs(v().x-g().x),Math.abs(v().x-g().x+t)),n=function(){Math.abs(v().x-g().x)==e?v().x=g().x:v().x=g().x-t,at>0&&(at-=1),c("Clean",m/2,P/2,36)},i=function(){v().rotation=0,v().y=g().y-v().height,v().state=wt.LANDED};if(i(),ft>0)if(e<5)n(),F+=200;else if(e<13)F+=100;else if(e<25)F+=100,ft>3&&(at+=.25);else{if(!(e<v().width/2))return void I(e);F+=100,ft>3&&(at+=.5)}ft==C.getLevelMax(W)&&(st=0,xt=Lt.LEVEL_COMPLETED,c("Tech stack completed",m/2,P/3,66),vt.clear()),A()}function O(){w(pt),q.text=F.toString(),C.toLandedBlocks(h(W),function(t){t.state===wt.TOTALLYMISSED&&(t.y+=tt,t.x+=t.vx)})}function T(){if(requestAnimationFrame(T),xt==Lt.INTRO)z++,z<Z&&!J?(K.visible=!0,Y.alpha=z/Z,K.alpha=1-z/Z):(Y.visible=!0,K.visible=!1),U.tilePosition.y+=Q,U.tilePosition.x+=Q;else if(xt==Lt.PLAYING){z++,z<Z?(K.visible=!0,Y.alpha=1-z/Z,K.alpha=z/Z):(Y.visible=!1,K.visible=!0),O();var t=function(t){C.toLandedBlocks(h(W),function(e){ft>4&&(e.x+=t)})};nt++,t(b(nt,ft));var n=m/2-v().width/2+E(nt),i=P/8+S(nt),r=m/2,o=it;C.drawHangingLine(n+v().width/2,i,r,o,vt),v().state===wt.FALLING?(v().rotation=.95*v().rotation,v().y+=tt,v().x+=v().vx,L()&&M()):(v().x=n,v().y=i,v().rotation=C.getAngle(n+v().width/2,r,i,o)-Math.PI/2),x()&&k()}else if((xt==Lt.GAMEOVER_SCROLLED||xt==Lt.GAMEOVER_NONSCROLLED||xt==Lt.LEVEL_COMPLETED)&&(st++,O(),C.rotateMissedBlocks(h(W),ct),e(W).position.y>0&&st>90&&(y(),y(),y(),y()),e(W).position.y<=0&&(xt==Lt.GAMEOVER_NONSCROLLED||xt==Lt.LEVEL_COMPLETED))){e(W).position.y=0;var a=P-(p().y+p().height);C.toLandedBlocks(h(W),function(t){t.y=t.y+a}),j.text="Height: "+ft+"\n\n Score: "+F;var u=function(t,e){var n=localStorage.getItem(It)||null,i=n?n.split(","):[];s(i,t)||xt===Lt.LEVEL_COMPLETED&&(V.text="Level unlocked: "+e,i.push(t),localStorage.setItem(It,i))};0===W?u("modern","legacy"):1===W&&u("legacy","enterprise"),xt=Lt.GAMEOVER_SCROLLED}N.render(H)}function A(){ft++}var C=t("./util.js")(),D=t("./keyboard.js")(),m=window.innerWidth,P=window.innerHeight,N=new PIXI.autoDetectRenderer(m,P);document.body.appendChild(N.view);var R,G,B,X,_,j,V,q,F,H=new PIXI.Container,Y=new PIXI.Container,K=new PIXI.Container;H.addChild(Y,K);var U,z,W=0,J=!0,Q=.25,Z=40,$=3,tt=P/60,et=30,nt=et*Math.PI/2,it=-600,rt=24,ot=1,et=30,at=0,ut=.07,ct=6,lt=0,st=0,dt=[[],[],[]],ft=0,ht=[],vt=new PIXI.Graphics,pt=new PIXI.Text;D.bindEvent(32,r);var gt,xt,Lt=C.GAMESTATES,wt=C.BLOCKSTATES,Et=25,St="0xf0da50",bt="0x000000",It="completedLevels";C.load(function(t,e){gt=e,i(),n(),d(),T()})}window.onload=function(){i()}},{"./keyboard.js":1,"./util.js":3}],3:[function(t,e,n){e.exports=function(){var t={};return t.GAMESTATES={INTRO:1,PLAYING:2,GAMEOVER_NONSCROLLED:3,GAMEOVER_SCROLLED:4,LEVEL_COMPLETED:5},t.BLOCKSTATES={FALLING:1,LANDED:2,MISSED:3,TOTALLYMISSED:4,HANGING:5},t.load=function(t){var e=new PIXI.loaders.Loader;["ubuntu","background_intro","lock","modern","legacy","enterprise","angular","cloud","docker","express","gulp","javascript","less","mongodb","nodejs","apache","mysql","jquery","php","bootstrap","wordpress","redhat","svn","ldap","oracle","java","jboss","hibernate","spring","soap","esb"].forEach(function(t){e.add(t,"img/"+t+".png")}),e.add("background","img/background.jpg"),e.add("background2","img/background2.jpg"),e.add("background3","img/background3.jpg"),e.once("complete",t),e.load()},t.getLevelSprite=function(e,n,i){return 0===i?t.getLevel0Sprite(e,n):1===i?t.getLevel1Sprite(e,n):2===i?t.getLevel2Sprite(e,n):void 0},t.getLevelMax=function(e){return 0===e?t.getLevel0Max():1===e?t.getLevel1Max():2===e?t.getLevel2Max():void 0},t.getLevel0Sprite=function(t,e){if(0===e)return t.cloud.texture;if(e<5)return t.docker.texture;if(e>=5&&e<10)return t.mongodb.texture;if(e>=10&&e<15)return t.nodejs.texture;if(e>=15&&e<20)return t.express.texture;if(e>=20&&e<25)return t.gulp.texture;if(e>=25&&e<30)return t.javascript.texture;if(e>=30&&e<35)return t.angular.texture;if(e>=35)return t.less.texture;throw Error("unknown sprite")},t.getLevel0Max=function(){return 39},t.getLevel1Sprite=function(t,e){return 0===e?t.ubuntu.texture:e<5?t.mysql.texture:e>=5&&e<10?t.apache.texture:e>=10&&e<15?t.php.texture:e>=15&&e<20?t.jquery.texture:e>=20&&e<25?t.bootstrap.texture:t.wordpress.texture},t.getLevel1Max=function(){return 30},t.getLevel2Sprite=function(t,e){return 0===e?t.redhat.texture:e<7?t.svn.texture:e<14?t.ldap.texture:e<21?t.oracle.texture:e<28?t.java.texture:e<35?t.jboss.texture:e<42?t.hibernate.texture:e<49?t.spring.texture:e<56?t.soap.texture:e<63?t.esb.texture:void 0},t.getLevel2Max=function(){return 62},t.getBlockSwingX=function(t){return 0===t?2:1===t?3:2===t?4:void 0},t.initBlock=function(e){e.state=t.BLOCKSTATES.HANGING,e.x=-1e3,e.y=0,e.anchor.x=0,e.anchor.y=0,e.vx=0,e.vrotation=0,e.totallyMissed=!1},t.scaleBlock=function(t,e,n){var i=n*e/800;t.scale.x=i,t.scale.y=i},t.initBlocks=function(e,n,i){null==i&&(i=1);for(var r=0;r<e.length;r++)t.initBlock(e[r]),t.scaleBlock(e[r],n,i)},t.getAngle=function(t,e,n,i){var r=t-e,o=n-i;return Math.acos(r/Math.sqrt(r*r+o*o))},t.toLandedBlocks=function(e,n){for(var i=0;i<e.length;i++){var r=e[i];t.contains([t.BLOCKSTATES.LANDED,t.BLOCKSTATES.MISSED,t.BLOCKSTATES.TOTALLYMISSED],r.state)&&n(r)}},t.drawHangingLine=function(t,e,n,i,r){var o=t-n,a=e-i;r.clear(),r.lineStyle(4,16777215,1),r.moveTo(t+o/20,e+a/20),r.lineTo(n,i)},t.rotateMissedBlocks=function(e,n){t.toLandedBlocks(e,function(e){t.handleRotation(e,n)})},t.handleRotation=function(t,e){t.vrotation&&(t.rotation+=t.vrotation,Math.abs(t.rotation)>Math.PI/4&&(t.x+=Math.sign(t.vrotation),t.y+=e))},t.contains=function(t,e){return t.indexOf(e)>-1},t}},{}]},{},[2]);